<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>New Order Received - #<%= orderNumber %>
  </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

    body {
      font-family: 'Inter', sans-serif;
      line-height: 1.6;
      color: #1a202c;
      background-color: #fffaf0;
      margin: 0;
      padding: 0;
    }

    .container {
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
    }

    .header {
      text-align: center;
      padding: 30px 20px;
      background: #c05621;
      color: white;
      border-radius: 8px 8px 0 0;
    }

    .header h1 {
      margin: 0;
      font-size: 24px;
      font-weight: 700;
    }

    .content {
      background: #ffffff;
      border-radius: 0 0 8px 8px;
      padding: 30px;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
    }

    .order-details {
      margin: 25px 0;
      border: 1px solid #feebc8;
      border-radius: 8px;
      padding: 20px;
      background: #fffaf0;
    }

    .item-row {
      display: flex;
      justify-content: space-between;
      padding: 10px 0;
      border-bottom: 1px solid #fbd38d;
    }

    .item-row:last-child {
      border-bottom: none;
    }

    .total-row {
      display: flex;
      justify-content: space-between;
      padding: 15px 0;
      font-weight: 700;
      font-size: 18px;
      border-top: 2px solid #fbd38d;
      margin-top: 10px;
    }

    .footer {
      text-align: center;
      margin-top: 30px;
      color: #718096;
      font-size: 13px;
    }

    .badge {
      background: #feebc8;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      color: #c05621;
    }

    .customer-info {
      margin-top: 20px;
      padding: 15px;
      background: #fff;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="header">
      <h1>
        <%= appName %> Seller Central
      </h1>
      <p>New Order Received!</p>
    </div>
    <div class="content">
      <h2>Congratulations, <%= sellerName %>!</h2>
      <p>You have received a new order. Please prepare the items for shipping as soon as possible.</p>

      <div class="order-details">
        <div style="margin-bottom: 15px;">
          <span class="badge">Order #<%= orderNumber %></span>
          <span style="float: right; color: #718096; font-size: 14px;">
            <%= orderDate %>
          </span>
        </div>

        <% items.forEach(function(item) { %>
          <div class="item-row">
            <div>
              <div style="font-weight: 600;">
                <%= item.name %>
              </div>
              <div style="font-size: 13px; color: #718096;">Qty: <%= item.quantity %>
              </div>
            </div>
            <div style="font-weight: 500;">KSh <%= parseFloat(item.subtotal).toLocaleString() %>
            </div>
          </div>
          <% }); %>

            <div class="total-row">
              <span>Total Earned</span>
              <span>KSh <%= parseFloat(sellerPayout).toLocaleString() %></span>
            </div>
            <div style="font-size: 12px; color: #718096; text-align: right; margin-top: -5px;">
              (Platform fee of KSh <%= parseFloat(platformFee).toLocaleString() %> deducted)
            </div>
      </div>

      <% if (locals.bookingDetails) { %>
        <div style="margin: 25px 0; border: 1px solid #7c3aed; border-radius: 8px; padding: 20px; background: #f5f3ff;">
          <h3 style="margin-top: 0; color: #6d28d9; border-bottom: 1px solid #ddd6fe; padding-bottom: 10px;">New Service
            Booking</h3>
          <div style="font-size: 14px;">
            <p style="margin: 8px 0;"><strong>Date:</strong>
              <%= bookingDetails.date %>
            </p>
            <p style="margin: 8px 0;"><strong>Time:</strong>
              <%= bookingDetails.time %>
            </p>
            <p style="margin: 8px 0;"><strong>
                <%= bookingDetails.locationLabel || 'Location' %>:
              </strong>
              <%= bookingDetails.location %>
            </p>
          </div>
        </div>
        <% } %>

          <div class="customer-info">
            <h4 style="margin-top: 0; color: #2d3748;">Customer Delivery Info:</h4>
            <div style="font-size: 14px;">
              <strong>Name:</strong>
              <%= buyerName %><br>
                <strong>Phone:</strong>
                <%= buyerPhone %><br>
                  <strong>Address:</strong>
                  <%= typeof shippingAddress==='string' ? shippingAddress : 'Check dashboard for details' %>
            </div>
          </div>

          <p style="text-align: center; margin-top: 30px;">
            <a href="<%= websiteUrl %>/seller/orders"
              style="display: inline-block; padding: 12px 24px; background: #c05621; color: white; text-decoration: none; border-radius: 6px; font-weight: 500;">Manage
              This Order</a>
          </p>
    </div>
    <div class="footer">
      <p>Â© <%= new Date().getFullYear() %>
          <%= appName %>
      </p>
    </div>
  </div>
</body>

</html>